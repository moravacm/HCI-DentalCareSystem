<Window
    x:Class="DentalCareSystem.Forms.Windows.Modals.AppointmentModal"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DentalCareSystem.Util"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="AppointmentModal"
    AllowsTransparency="True"
    Background="#33000000"
    WindowStartupLocation="CenterOwner"
    WindowStyle="None"
    WindowState="Maximized"
    mc:Ignorable="d">

    <Grid
        Margin="0,0,0,0"
        HorizontalAlignment="Center"
        VerticalAlignment="Center"
        Background="{StaticResource MaterialDesignCardBackground}">

        <materialDesign:Snackbar
            x:Name="AppointmentModalSnackbar"
            Background="{StaticResource MaterialDesignSnackbarRipple}"
            IsActive="False"
            MessageQueue="{materialDesign:MessageQueue}" />

        <StackPanel
            MinWidth="350"
            HorizontalAlignment="Center"
            VerticalAlignment="Stretch"
            UseLayoutRounding="False">
            <Label
                Margin="20,20,20,0"
                Padding="4,4,4,4"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                x:Name="ModalTitle"
                Content="{Binding ModalTitle}"
                FontSize="16"
                FontWeight="Bold" />

            <materialDesign:Card
                Margin="0,20,0,10"
                MaxWidth="250"
                VerticalAlignment="Center">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <DatePicker x:Name="AppointmentDatePicker"
                                local:LocalizationProvider.ContentID="Date"
                                Style="{StaticResource MaterialDesignFilledDatePicker}"
                                SelectedDate="{Binding AppointmentDateTime}" />

                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Bottom" Margin="5,0,0,0">
                        <TextBox 
                            x:Name="AppointmentHourTextBox"
                            materialDesign:HintAssist.Hint="hh"
                            Width="40"
                            MaxLength="2"
                            HorizontalAlignment="Center"
                            Text="{Binding AppointmentHour}" />

                        <TextBlock 
                            Text=":"
                            FontSize="16" 
                            VerticalAlignment="Center" 
                            Margin="5,0"/>

                        <TextBox 
                            x:Name="AppointmentMinuteTextBox"
                            materialDesign:HintAssist.Hint="mm"
                            HorizontalAlignment="Center"
                            Width="40"
                            MaxLength="2"
                            Text="{Binding AppointmentMinute}" />
                    </StackPanel>

                </Grid>
            </materialDesign:Card>

            <Grid MaxWidth="250" Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBox x:Name="PatientJMBGTextBox"
                         local:LocalizationProvider.ContentID="PatientJMBG"
                         Style="{StaticResource MaterialDesignFilledTextBox}"
                         Grid.Column="0"
                         Text="{Binding PatientJMBG, UpdateSourceTrigger=PropertyChanged}"
                         KeyDown="PatientJMBGTextBox_KeyDown" />

                <Button Grid.Column="1"
                        Content="..."
                        Margin="5,0,0,0"
                        Click="SearchPatient_Click" />
            </Grid>

            <TextBox x:Name="PatientNameTextBlock"
               local:LocalizationProvider.ContentID="Patient"
               Style="{StaticResource MaterialDesignFilledTextBox}"
               Text="{Binding PatientInfo}"
               Margin="0,0,0,10"
               MaxWidth="250"
               HorizontalAlignment="Stretch"/>


            <ComboBox
                x:Name="DentistComboBox"
                MaxWidth="250"
                Margin="0,0,0,10"
                local:LocalizationProvider.ContentID="Dentist"
                Style="{StaticResource MaterialDesignFilledComboBox}"
                ItemsSource="{Binding Dentists}"
                DisplayMemberPath="FullName"
                SelectedValuePath="JMBG"
                SelectedValue="{Binding SelectedDentistJMBG}" />

            <StackPanel
                Margin="0,20,0,50"
                HorizontalAlignment="Center"
                Orientation="Horizontal">
                <Button
                    MinWidth="110"
                    Margin="0,0,30,0"
                    HorizontalAlignment="Left"
                    local:LocalizationProvider.ContentID="Save"
                    Click="AddOrUpdate_Click"
                    FontSize="16"
                    FontWeight="Bold" />
                <Button
                    MinWidth="110"
                    local:LocalizationProvider.ContentID="Cancel"
                    BorderBrush="#FF7D7373"
                    BorderThickness="1,1,1,1"
                    Click="Cancel_Click"
                    FontSize="16"
                    FontWeight="Bold"
                    Style="{StaticResource MaterialDesignFlatButton}" />
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>